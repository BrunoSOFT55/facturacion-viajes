<!DOCTYPE html >
< html  lang =" es " >
< cabeza >
< meta  charset =" UTF-8 " >
< title > Comprobante de Servicio - Altamirano Nosiglia Viajes </ title >

< meta  name =" viewport " content =" ancho=ancho-del-dispositivo, escala-inicial=1 " >
< link  rel =" manifiesto " href =" manifiesto.json " >
< meta  name =" color del tema " content =" #0b1f3a " >

< link  href =" https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css " rel =" hoja de estilo " >

< estilo >
: raíz {
 --azul : # 0b1f3a ;
 --azul2 : # 162f5f ;
 --gris : # f3f5f8 ;
}
cuerpo { fondo : # dde3ee ; familia de fuentes : 'Segoe UI' , sans-serif;}
. factura-box { ancho máximo : 950 px ; margen : automático; fondo : # fff ; relleno : 40 px ; radio del borde : 14 px ; sombra del cuadro : 0  18 px  40 px  rgba ( 0 , 0 , 0 , .18 ); borde superior : 12 px sólido var ( --azul );}
. encabezado { display : flex; justify-content : espacio entre; border-bottom : 2 px solid var ( --azul ); padding-bottom : 18 px ; margin-bottom : 30 px ;}
. encabezado  img { altura máxima : 90 px }
. marca { tamaño de fuente : 24 px ; peso de fuente : 800 ; color : var ( --azul );}
. sub { tamaño de fuente : 13 px ; color : # 666 }
. factura-titulo { color : var ( --azul2 ); peso de fuente : 700 }
. tabla  thead { fondo : var ( --azul2 ); color : # fff }
. total-box { fondo : # f3f5f8 ; borde : 2 px sólido var ( --azul2 ); relleno : 18 px ; radio del borde : 10 px ; tamaño de fuente : 24 px ; peso de fuente : 800 ; color : var ( --azul2 )}
. btn-success { fondo : var ( --azul ); borde : ninguno}
. btn-success : hover { fondo : var ( --azul2 )}
@media print{
 cuerpo { fondo : # fff }
. no-print , # tablaHistorial , # buscar , h5 . mt-4 , footer { display : none !important }
}
@media ( ancho máximo : 576 px ){
. encabezado { flex-direction : columna; text-align : centro}
. marca { tamaño de fuente : 18 px }
}
@media ( ancho máximo : 480 px ){
.factura -box { relleno : 18 px ; radio del borde : 10 px }
. encabezado  img { ancho máximo : 160 px ; margen : 0 automático 10 px ; visualización : bloque}
. marca { tamaño de fuente : 17 px }
. factura-titulo { tamaño de fuente : 14 px }
 h5 { tamaño de fuente : 15 px ; margen superior : 14 px }
 entrada , botón { tamaño de fuente : 14 px !importante }
}
</ estilo >
</ cabeza >

< cuerpo >

< div  class =" contenedor mt-4 " >
< div  class =" factura-box " >

< div  class =" encabezado " >
< img  src =" logotipo.png " >
< div  class =" text-end " >
< div  class =" marca " > ALTAMIRANO NOSIGLIA VIAJES </ div >
< div  class =" sub " > Solari – Corrientes </ div >
< div  class =" factura-titulo " > COMPROBANTE DE SERVICIO </ div >
< input  type =" date " id =" fecha " class =" form-control form-control-sm mt-2 no-print " >
</div>​​
</div>​​

< h5 > Datos del Cliente </ h5 >
< div  class =" fila g-2 " >
< div  class =" col-md-5 " > < input  id =" cliente " class =" form-control " placeholder =" Nombre y Apellido " > </ div >
< div  class =" col-md-3 " > < input  id =" dni " class =" form-control " placeholder =" DNI/CUIT " > </ div >
< div  class =" col-md-2 " > < input  id =" teléfono " class =" form-control " placeholder =" Teléfono " > </ div >
</div>​​

< h5  class =" mt-3 " > Detalle del Servicio </ h5 >
< div  class =" fila g-2 mb-3 sin impresión " >
< div  class =" col-md-6 " > < input  id =" desc " class =" form-control " placeholder =" Detalle del servicio " > </ div >
< div  class =" col-md-3 " > < input  id =" precio " type =" number " class =" form-control " placeholder =" Importar " > </ div >
< div  class =" col-md-3 d-grid gap-2 " >
< h5  class =" mt-4 " > Historia de Comprobantes </ h5 >
< input  type =" text " id =" buscar " onkeyup =" filtrarHistorial() " class =" form-control mb-2 no-print " placeholder =" Buscar por cliente o fecha... " >

< tabla  clase =" tabla tabla-sm tabla-bordeada d-none " id =" tablaHistorial " >
< thead > < tr > < th > Fecha </ th > < th > Cliente </ th > < th  class =" text-end " > Total </ th > </ tr > </ thead >
< cuerpo > </ cuerpo >
</tabla>​​

< div  class =" text-end mt-4 no-print " >
< button  onclick =" nuevaFactura() " class =" btn btn-outline-danger me-2 " > Nueva Factura </ button >
< button  onclick =" guardarHistorial() " class =" btn btn-secondary " > Guardar Historial </ button >
< button  onclick =" window.print() " class =" btn btn-success " > Imprimir / PDF </ button >
</div>​​

</div>​​
</div>​​

< footer  class =" bg-dark texto-blanco texto-centro py-4 mt-5 borde-superior borde-secundario " >
    < div  class =" contenedor " >
        < h6  class =" mb - 1 " > Rodríguez Bruno </h6>
        < pequeña  clase =" texto-secundario " >
            Técnico en Desarrollo de Software < br >
            Sistemas Web · Apps · Soluciones Digitales
        </ pequeño >
    </div>​​
</ pie de página >

< script >
sea  ​​total = 0 ;

función  agregar ( ) {
 si ( ! desc . valor || ! precio . valor ) devolver ;
 sea  ​​p = parseFloat ( precio . valor ) ;
 total += p ;
 tabla . querySelector ( "tbody" ) . innerHTML += `<tr><td> ${ desc . valor } </td><td class='text-end'>$ ${ p . toFixed ( 2 ) } </td></tr>` ;
 documento.getElementById ( " total " ) . innerText = total.toFixed ( 2 ) ;​​
 desc . value = "" ; precio . value = "" ;
}

función  enviarWhats ( ) {
 let  msg = `Hola ${ cliente . value } , te enviamos tu comprobante.\nFecha: ${ fecha . valor } \nTotal: $ ${ total . toFixed ( 2 ) } ` ;
 ventana . abierta ( "https://wa.me/54" + telefono . valor + "?text=" + encodeURIComponent ( msg ) ) ;
}

función  guardarHistorial ( ) {
 deje  que hist = JSON . parse ( localStorage . getItem ( "historial" ) || "[]" ) ;
 historia . push ( { cliente : cliente.valor , fecha : fecha.valor , total : total.toFixed ( 2 ) } ) ;​​​​​​
 localStorage .setItem ( " historial " , JSON .stringify ( hist ) ) ;
 cargarHistorial ( ) ;
 alerta ( "Factura guardada" ) ;
}

función  cargarHistorial ( ) {
 deje  que hist  =  JSON . parse ( localStorage . getItem ( "historial" )  ||  "[]" ) ;
 deje que  tbody =  document.querySelector  ( " # tablaHistorial tbody" ) ;
 tbody .innerHTML = "  " ; 

 hist . reverse ( ) . forEach ( h  =>  {
   tbody .innerHTML + =  ` 
    <tr>
      <td> ${ h . fecha } </td>
      <td> ${ h . cliente } </td>
      <td class="text-end">$ ${ h . total } </td>
    </tr>` ;
 } ) ;
}


función  filtrarHistorial ( ) {
 sea  ​​q  =  buscar .value .toLowerCase ( ) ;​​
 let  tabla  =  documento . getElementById ( "tablaHistorial" ) ;

 si ( q  ===  "" ) {
   tabla .classList .add ( "d- none " ) ;
   devolver ; 
 }

  tabla.classList.remove ( " d- none " ) ;

 documento .querySelectorAll ( " # tablaHistorial tbody tr" ) .forEach ( fila = > {
   fila . style . display  =  fila . innerText . toLowerCase ( ) . includes ( q ) ? "" : "ninguno" ;
 } ) ;
}


función  nuevaFactura ( ) {
 if ( ! confirm ( "¿Desea iniciar una nueva factura? Se borrarán los datos actuales." ) ) return ;
 cliente . valor = "" ; dni . valor = "" ; teléfono . valor = "" ; desc . valor = "" ; precio . valor = "" ; fecha . valor = "" ;
 tabla .querySelector ( "tbody " ) .innerHTML = " " ;
 total = 0 ; documento . getElementById ( "total" ) . texto interno = "0,00" ;
}

ventana . onload = cargarHistorial ;
</ script >

 
< script >
if ( 'serviceWorker'  en  el navegador ) {
 navegante . trabajador de servicio . registrarse ( '/facturacion-viajes/service-worker.js' ) ;
}
</ script >


 
< script >
if  ( "serviceWorker"  en  el navegador )  {
  navegante . trabajador de servicio . registrarse ( "service-worker.js" ) ;
}
</ script >
</ cuerpo >
</html>​​
